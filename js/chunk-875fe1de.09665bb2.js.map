{"version":3,"sources":["webpack:///./src/views/Login.vue?4389","webpack:///./src/views/Login.vue","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?4fe3","webpack:///./src/views/Login.vue?b6b6","webpack:///./src/notify.js"],"names":["render","_vm","this","_c","_self","staticClass","_m","ref","attrs","loginForm","loginRules","model","value","netID","callback","$$v","$set","expression","nativeOn","$event","type","indexOf","_k","keyCode","key","handleLogin","apply","arguments","password","isFaculty","_v","staticStyle","loading","preventDefault","staticRenderFns","name","data","required","trigger","message","redirect","undefined","watch","$route","handler","route","query","immediate","created","$store","state","ISLOGIN","sections","curSectionIndex","curNetID","mounted","localStorage","getItem","methods","$refs","validate","valid","login","then","res","code","netid","setItem","isMobile","test","navigator","userAgent","$router","push","path","notify","catch","component","msg","Notification","title","duration","position"],"mappings":"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","file":"js/chunk-875fe1de.09665bb2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=2c454a62&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-wrapper\"},[_c('div',{staticClass:\"form-box\"},[_vm._m(0),_c('el-form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"label-width\":\"0px\"}},[_c('el-form-item',{attrs:{\"prop\":\"netID\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"auto-complete\":\"off\",\"placeholder\":\"netID\",\"prefix-icon\":\"el-icon-user\"},model:{value:(_vm.loginForm.netID),callback:function ($$v) {_vm.$set(_vm.loginForm, \"netID\", $$v)},expression:\"loginForm.netID\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"auto-complete\":\"off\",\"placeholder\":\"password\",\"prefix-icon\":\"el-icon-lock\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleLogin.apply(null, arguments)}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',[_c('el-checkbox',{model:{value:(_vm.loginForm.isFaculty),callback:function ($$v) {_vm.$set(_vm.loginForm, \"isFaculty\", $$v)},expression:\"loginForm.isFaculty\"}},[_vm._v(\"Faculty\")])],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\",\"font-size\":\"20px\"},attrs:{\"loading\":_vm.loading,\"size\":\"small\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleLogin.apply(null, arguments)}}},[(!_vm.loading)?_c('span',[_vm._v(\"Log In\")]):_c('span',[_vm._v(\"Loading...\")])])],1)],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"form-title\"},[_c('p',[_vm._v(\"Log in with NetID\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"login-wrapper\">\n        <div class=\"form-box\">\n            <div class=\"form-title\">\n                <p>Log in with NetID</p>\n            </div>\n            <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" label-width=\"0px\" class=\"login-form\">\n                <el-form-item prop=\"netID\">\n                    <el-input v-model=\"loginForm.netID\" type=\"text\" auto-complete=\"off\" placeholder=\"netID\"\n                        prefix-icon=\"el-icon-user\" />\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input v-model=\"loginForm.password\" type=\"password\" auto-complete=\"off\" placeholder=\"password\"\n                        prefix-icon=\"el-icon-lock\" @keyup.enter.native=\"handleLogin\" />\n                </el-form-item>\n                <el-form-item>\n                    <el-checkbox v-model=\"loginForm.isFaculty\">Faculty</el-checkbox>\n                </el-form-item>\n                <el-form-item>\n                    <el-button :loading=\"loading\" size=\"small\" type=\"primary\" style=\"width:100%; font-size: 20px;\"\n                        @click.native.prevent=\"handleLogin\">\n                        <span v-if=\"!loading\">Log In</span>\n                        <span v-else>Loading...</span>\n                    </el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { login } from '@/api'\nimport { notify } from '@/notify'\nexport default {\n    name: 'Login',\n    data() {\n        return {\n            loginForm: {\n                netID: '',\n                password: '',\n                isFaculty: true\n            },\n            loginRules: {\n                netID: [{ required: true, trigger: 'blur', message: 'NetID cannot be empty!' }],\n                password: [{ required: true, trigger: 'blur', message: 'Password cannot be empty!' }]\n            },\n            loading: false,\n            redirect: undefined\n        }\n    },\n    watch: {\n        $route: {\n            handler: function (route) {\n                this.redirect = route.query && route.query.redirect\n            },\n            immediate: true\n        }\n    },\n    created() {\n        this.$store.state.ISLOGIN = false\n        this.$store.state.sections = []\n        this.$store.state.curSectionIndex = 0\n        this.$store.state.isFaculty = true\n        this.$store.state.curNetID = null\n    },\n    mounted() {\n        if (localStorage.getItem('netID') && localStorage.getItem('password') && localStorage.getItem('isFaculty')) {\n            this.loginForm.netID = localStorage.getItem('netID')\n            this.loginForm.password = localStorage.getItem('password')\n            this.loginForm.isFaculty = localStorage.getItem('isFaculty')\n        }\n    },\n    methods: {\n        handleLogin() {\n            this.$refs.loginForm.validate(valid => {\n                const data = {\n                    netID: this.loginForm.netID,\n                    password: this.loginForm.password,\n                    isFaculty: this.loginForm.isFaculty\n                }\n                if (valid) {\n                    this.loading = true\n                    login(data).then(res => {\n                        // console.log(res.data.data)\n                        if (res.data.code == 200 && res.data.data != null) {\n                            this.$store.state.ISLOGIN = true\n                            this.$store.state.isFaculty = data.isFaculty\n                            this.$store.state.curNetID = res.data.data.netid\n                            this.$store.state.sections = res.data.data.sections\n                            localStorage.setItem('netID', data.netID)\n                            localStorage.setItem('password', data.password)\n                            localStorage.setItem('isFaculty', data.isFaculty)\n                            this.loading = false\n                            let isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)\n                            if (isMobile) {\n                                this.$router.push({ path: this.redirect || '/scan' })\n                            } else {\n                                this.$router.push({ path: this.redirect || '/home' })\n                            }\n                        } else {\n                            this.loading = false\n                            notify('Wrong Password!')\n                        }\n                    }).catch(() => {\n                        this.loading = false\n                        notify('Wrong Password!')\n                    })\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n.login-wrapper {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100vh;\n    background-size: cover;\n    background-position: center;\n    background-size: 100%;\n    background-image: url(../assets/img/loginBack.jpg);\n\n    .form-box {\n        width: 320px;\n        padding: 16px 30px;\n        background: #fff;\n        border-radius: 4px;\n        box-shadow: 0 15px 30px 0 rgba(0, 0, 1, .1);\n\n        .form-title {\n            margin: 10px auto 35px;\n            text-align: center;\n            color: #707070;\n            font-size: 24px;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=2c454a62\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=2c454a62&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Notification } from 'element-ui';\n\nexport function notify(msg) {\n    Notification({\n        title: 'Warning',\n        message: msg,\n        type: 'warning',\n        duration: 1200,\n        position: 'top-left'\n    });\n}"],"sourceRoot":""}