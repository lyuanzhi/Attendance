(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1212ca60"],{"21a6":function(t,e,a){(function(a){var n,i,o;(function(a,s){i=[],n=s,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,a){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){r(n.response,e,a)},n.onerror=function(){console.error("could not download file")},n.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(t,e,a){var l=s.URL||s.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?o(r):i(r.href)?n(t,e,a):o(r,r.target="_blank")):(r.href=l.createObjectURL(t),setTimeout((function(){l.revokeObjectURL(r.href)}),4e4),setTimeout((function(){o(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,a,s){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),a);else if(i(t))n(t,a,s);else{var l=document.createElement("a");l.href=t,l.target="_blank",setTimeout((function(){o(l)}))}}:function(t,e,a,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,a);var o="application/octet-stream"===t.type,r=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&r||l)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},d.readAsDataURL(t)}else{var u=s.URL||s.webkitURL,p=u.createObjectURL(t);i?i.location=p:location.href=p,i=null,setTimeout((function(){u.revokeObjectURL(p)}),4e4)}});s.saveAs=r.saveAs=r,t.exports=r}))}).call(this,a("c8ba"))},"4d25":function(t,e,a){"use strict";a("a86a")},5789:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-classic-wrapper"},[e("el-card",{attrs:{shadow:"always"}},[e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[e("el-button",{staticClass:"control-btns",attrs:{type:"primary"},on:{click:function(e){t.exportVisible=!0}}},[t._v("Export")]),e("div",{staticClass:"control-btns"},[e("el-tag",{staticStyle:{display:"flex","align-items":"center"},attrs:{size:"medium"}},[t._v(" Disable Changing Display Name "),e("el-switch",{staticStyle:{"margin-left":"10px"},model:{value:t.editForbid,callback:function(e){t.editForbid=e},expression:"editForbid"}})],1)],1)],1),e("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"NetID","label-width":"90px"}},[e("el-input",{attrs:{placeholder:"NetID"},model:{value:t.netId,callback:function(e){t.netId=e},expression:"netId"}})],1),e("el-form-item",{attrs:{label:"Date","label-width":"70px"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"Select Date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1),e("el-form-item",[e("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Search")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",size:"medium"}},[e("el-table-column",{attrs:{prop:"netId",label:"NetID",align:"center",width:"300",sortable:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{attrs:{slot:"reference"},slot:"reference"},[e("el-tag",{attrs:{size:"medium"}},[t._v(t._s(a.row.netId))])],1)]}}])}),e("el-table-column",{attrs:{prop:"displayName",label:"Display Name",align:"center","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.editable?[e("el-input",{staticStyle:{width:"100px"},model:{value:a.row.displayName,callback:function(e){t.$set(a.row,"displayName",e)},expression:"scope.row.displayName"}}),e("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-left":"5px"},attrs:{type:"warning"},on:{click:function(e){return t.cancelEdit(a.row)}}},[t._v("Cancel")])]:e("span",[t._v(t._s(a.row.displayName))])]}}])}),e("el-table-column",{attrs:{label:"Attendance Status",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-select",{staticStyle:{width:"200px"},on:{change:function(e){return t.selectChange(a.row)}},model:{value:a.row.attendStatus,callback:function(e){t.$set(a.row,"attendStatus",e)},expression:"scope.row.attendStatus"}},[e("el-option",{attrs:{value:0,label:"Unselected",disabled:""}}),e("el-option",{attrs:{value:1,label:"Present"}}),e("el-option",{attrs:{value:2,label:"Absent"}}),e("el-option",{attrs:{value:3,label:"Tardy"}})],1)]}}])}),e("el-table-column",{attrs:{align:"center",label:"Operation",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.editable?e("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.confirmEdit(a.row)}}},[t._v("Save")]):e("el-button",{attrs:{type:"primary",size:"small",disabled:t.editForbid},on:{click:function(t){a.row.editable=!a.row.editable,a.row.originDisplayName=a.row.displayName}}},[t._v("Change Display Name")])]}}])})],1),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.exportLoading,expression:"exportLoading"}],attrs:{title:"Export",visible:t.exportVisible,width:"20%"},on:{"update:visible":function(e){t.exportVisible=e}}},[e("div",{staticClass:"export-data"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportFile("JSON")}}},[t._v("JSON")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportFile("XML")}}},[t._v("XML")])],1),e("div",{staticClass:"hints"},[t._v("Please select the export format.")])])],1)],1)},i=[],o=a("d722"),s=a("c7b3"),l=a("21a6"),r={name:"RollCall",data(){return{dateVal:(new Date).toISOString().substr(0,10),netId:"",editForbid:!1,listLoading:!1,tableData:[],exportVisible:!1,exportLoading:!1}},created(){this.fetchData(),this.$bus.$on("refresh",this.handleRefresh)},beforeDestroy(){this.$bus.$off("refresh",this.handleRefresh)},methods:{exportFile(t){this.exportLoading=!0;let e={sectionId:this.$store.state.sections[this.$store.state.curSectionIndex].sectionid,netId:this.$store.state.curNetID,type:t};Object(o["d"])(e).then(e=>{if(200==e.data.code&&null!=e.data.data){this.exportVisible=!1,this.exportLoading=!1;let a=new Blob([e.data.data],{type:"text/plain;charset=utf-8"});Object(l["saveAs"])(a,"attendance_report_for_faculty."+t.toLowerCase())}else Object(s["a"])("Failed to Export!"),this.exportLoading=!1}).catch(()=>{Object(s["a"])("Failed to Export!"),this.exportLoading=!1})},handleRefresh(){this.dateVal=(new Date).toISOString().substr(0,10),this.netId="",this.fetchData()},fetchData(){if(0==this.$store.state.sections.length)return;this.listLoading=!0;let t={sectionId:this.$store.state.sections[this.$store.state.curSectionIndex].sectionid,netId:this.netId,date:this.dateVal};Object(o["f"])(t).then(t=>{200==t.data.code&&null!=t.data.data?(this.tableData=t.data.data.map(t=>(this.$set(t,"editable",!1),this.$set(t,"originDisplayName",""),this.$set(t,"originAttendStatus",t.attendStatus),t)),this.listLoading=!1):(Object(s["a"])(t.data.message),this.listLoading=!1)}).catch(()=>{Object(s["a"])("Failed to Fetch Data!"),this.listLoading=!1})},onSubmit(){this.fetchData()},selectChange(t){let e={sectionId:this.$store.state.sections[this.$store.state.curSectionIndex].sectionid,netId:t.netId,date:this.dateVal,attendStatus:t.attendStatus};Object(o["k"])(e).then(e=>{200==e.data.code&&1==e.data.data?t.originAttendStatus=t.attendStatus:(t.attendStatus=t.originAttendStatus,Object(s["a"])("Failed to Change Attendance Status!"))}).catch(()=>{t.attendStatus=t.originAttendStatus,Object(s["a"])("Failed to Change Attendance Status!")})},cancelEdit(t){t.editable=!1,t.displayName=t.originDisplayName},confirmEdit(t){t.editable=!1;let e={netId:t.netId,displayName:t.displayName};Object(o["a"])(e).then(e=>{200==e.data.code&&1==e.data.data||(t.displayName=t.originDisplayName,Object(s["a"])("Failed to Change Display Name!"))}).catch(()=>{t.displayName=t.originDisplayName,Object(s["a"])("Failed to Change Display Name!")})}}},c=r,d=(a("4d25"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,null,null);e["default"]=u.exports},a86a:function(t,e,a){},c7b3:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("5c96");function i(t){Object(n["Notification"])({title:"Warning",message:t,type:"warning",duration:1200,position:"top-left"})}}}]);
//# sourceMappingURL=chunk-1212ca60.102d3c58.js.map